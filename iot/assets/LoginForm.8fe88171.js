var j=(C,r,i)=>new Promise((u,x)=>{var o=l=>{try{c(i.next(l))}catch(f){x(f)}},w=l=>{try{c(i.throw(l))}catch(f){x(f)}},c=l=>l.done?u(l.value):Promise.resolve(l.value).then(o,w);c((i=i.apply(C,r)).next())});import{B as z,a$ as D,ao as E,r as S,Q as M,j as V,u as e,D as K,F as O,G as L,H as $,w as s,a6 as t,ad as _,b0 as P,ae as d,K as m,aS as p,b1 as U,J as q,b2 as A,b3 as G,b4 as Q,L as W,b5 as H,ab as J,b6 as X,b7 as Y}from"./vendor.c791f568.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import{u as Z,a as ee,L as y,_ as se,b as te}from"./LoginFormTitle.ac9a2119.js";import{b as ae,a as oe,f as le,h as ne}from"./index.fa3b631c.js";const pe=z({setup(C){const r=X,i=Y,u=D.Item,x=E.Password,{t:o}=ae(),{notification:w,createErrorModal:c}=ne(),{prefixCls:l}=oe("login"),f=le(),{setLoginState:b,getLoginState:h}=Z(),{getFormRules:N}=ee(),F=S(),k=S(!1),I=S(!1),g=M({username:"jyiot",password:"123456"}),{validForm:T}=te(F),R=V(()=>e(h)===y.LOGIN);function B(){return j(this,null,function*(){const v=yield T();if(!!v)try{k.value=!0;const a=yield f.login({password:v.password,username:v.username,mode:"none"});a&&w.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${a.realName}`,duration:3})}catch(a){c({title:o("sys.api.errorTip"),content:a.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body})}finally{k.value=!1}})}return(v,a)=>(K(),O(J,null,[L(s(se,{class:"enter-x"},null,512),[[$,e(R)]]),L(s(e(D),{class:"p-4 enter-x",model:e(g),rules:e(N),ref_key:"formRef",ref:F,onKeypress:H(B,["enter"])},{default:t(()=>[s(e(u),{name:"username",class:"enter-x"},{default:t(()=>[s(e(E),{size:"large",value:e(g).username,"onUpdate:value":a[0]||(a[0]=n=>e(g).username=n),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:t(()=>[s(e(x),{size:"large",visibilityToggle:"",value:e(g).password,"onUpdate:value":a[1]||(a[1]=n=>e(g).password=n),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:t(()=>[s(e(r),{span:12},{default:t(()=>[s(e(u),null,{default:t(()=>[_(" No logic, you need to deal with it yourself "),s(e(P),{checked:I.value,"onUpdate:checked":a[2]||(a[2]=n=>I.value=n),size:"small"},{default:t(()=>[d(m(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:t(()=>[s(e(u),{style:{"text-align":"right"}},{default:t(()=>[_(" No logic, you need to deal with it yourself "),s(e(p),{type:"link",size:"small",onClick:a[3]||(a[3]=n=>e(b)(e(y).RESET_PASSWORD))},{default:t(()=>[d(m(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:t(()=>[s(e(p),{type:"primary",size:"large",block:"",onClick:B,loading:k.value},{default:t(()=>[d(m(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"]),_(` <Button size="large" class="mt-4 enter-x" block @click="handleRegister">
        {{ t('sys.login.registerButton') }}
      </Button> `)]),_:1}),s(e(i),{class:"enter-x"},{default:t(()=>[s(e(r),{md:8,xs:24},{default:t(()=>[s(e(p),{block:"",onClick:a[4]||(a[4]=n=>e(b)(e(y).MOBILE))},{default:t(()=>[d(m(e(o)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:t(()=>[s(e(p),{block:"",onClick:a[5]||(a[5]=n=>e(b)(e(y).QR_CODE))},{default:t(()=>[d(m(e(o)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:7,xs:24},{default:t(()=>[s(e(p),{block:"",onClick:a[6]||(a[6]=n=>e(b)(e(y).REGISTER))},{default:t(()=>[d(m(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),s(e(U),{class:"enter-x"},{default:t(()=>[d(m(e(o)("sys.login.otherSignIn")),1)]),_:1}),q("div",{class:W(["flex justify-evenly enter-x",`${e(l)}-sign-in-way`])},[s(e(A)),s(e(G)),s(e(Q))],2)]),_:1},8,["model","rules","onKeypress"]),[[$,e(R)]])],64))}});export{pe as default};
