var He=Object.defineProperty,Re=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var he=(e,t,a)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,$=(e,t)=>{for(var a in t||(t={}))Ye.call(t,a)&&he(e,a,t[a]);if(ue)for(var a of ue(t))ze.call(t,a)&&he(e,a,t[a]);return e},ee=(e,t)=>Re(e,Xe(t));var fe=(e,t,a)=>new Promise((p,L)=>{var S=k=>{try{i(a.next(k))}catch(x){L(x)}},n=k=>{try{i(a.throw(k))}catch(x){L(x)}},i=k=>k.done?p(k.value):Promise.resolve(k.value).then(S,n);i((a=a.apply(e,t)).next())});import{cb as Qe,cc as qe,cd as Ge,B as te,r as Y,ac as Je,j as D,T as F,D as I,F as P,u as r,a7 as We,ad as j,a2 as ne,a6 as U,ae as ye,K as pe,L as ke,w as v,ce as Ze,ab as z,ap as et,cf as tt,aC as nt,aT as lt,cg as at,aA as Q,ay as ct,aB as st,V as rt,ch as it,A as ot,n as le,$ as ge,a0 as dt,aj as ve,b1 as ut,bL as xe,aQ as ht,ai as ft,Q as Se,t as q,ci as yt,o as pt,am as V,G as be,H as Ke,cj as kt,a5 as gt,as as Ce,bv as vt}from"./vendor.c791f568.js";import{aO as xt,b as St,az as bt,I as G,aP as Le,aQ as Kt,ae as Ct,j as ae,aR as Lt,aC as At,aS as _t,ay as Et,S as Tt,aT as mt,B as Ae,al as wt}from"./index.43dbecee.js";/* empty css               */function ce(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((a,p)=>a+ce(e,p),""):Object.keys(t).reduce((a,p)=>a+(t[p]?ce(e,p):""),""):""}function Nt(e){return(t,a)=>(t&&typeof t!="string"&&(a=t,t=""),t=t?`${e}__${t}`:e,`${t}${ce(t,a)}`)}function _e(e){return[Nt(`${xt}-${e}`)]}const Ee=Symbol(),Te=Symbol();function Bt(e,t){if(!qe(e)||!!e[Te])return e;const{values:a,required:p,default:L,type:S,validator:n}=e,i=a||n?k=>{let x=!1,s=[];if(a&&(s=[...a,L],x||(x=s.includes(k))),n&&(x||(x=n(k))),!x&&s.length>0){const u=[...new Set(s)].map(l=>JSON.stringify(l)).join(", ");Ge(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${u}], got value ${JSON.stringify(k)}.`)}return x}:void 0;return{type:typeof S=="object"&&Object.getOwnPropertySymbols(S).includes(Ee)?S[Ee]:S,required:!!p,default:L,validator:i,[Te]:!0}}const Dt=e=>Qe(Object.entries(e).map(([t,a])=>[t,Bt(a,t)]));var E;(function(e){e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY"})(E||(E={}));const It=["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],$t=Dt({value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:Boolean,search:Boolean,searchValue:{type:String,default:""},checkStrictly:Boolean,clickRowToExpand:{type:Boolean,default:!1},checkable:Boolean,defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:Boolean,fieldNames:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:void 0},rightMenuList:{type:Array},filterFn:{type:Function,default:void 0},highlight:{type:[Boolean,String],default:!1},expandOnSearch:Boolean,checkOnSearch:Boolean,selectedOnSearch:Boolean}),Mt={key:2,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},Ft=te({props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0}},emits:["strictly-change","search"],setup(e,{emit:t}){const a=e,p=Y(""),[L]=_e("tree-header"),S=Je(),{t:n}=St(),i=D(()=>{const l=S.headerTitle||a.title;return["mr-1","w-full",{["ml-5"]:l}]}),k=D(()=>{const{checkable:l}=a,o=[{label:n("component.tree.expandAll"),value:E.EXPAND_ALL},{label:n("component.tree.unExpandAll"),value:E.UN_EXPAND_ALL,divider:l}];return l?[{label:n("component.tree.selectAll"),value:E.SELECT_ALL},{label:n("component.tree.unSelectAll"),value:E.UN_SELECT_ALL,divider:l},...o,{label:n("component.tree.checkStrictly"),value:E.CHECK_STRICTLY},{label:n("component.tree.checkUnStrictly"),value:E.CHECK_UN_STRICTLY}]:o});function x(l){var d,f,h,g;const{key:o}=l;switch(o){case E.SELECT_ALL:(d=a.checkAll)==null||d.call(a,!0);break;case E.UN_SELECT_ALL:(f=a.checkAll)==null||f.call(a,!1);break;case E.EXPAND_ALL:(h=a.expandAll)==null||h.call(a,!0);break;case E.UN_EXPAND_ALL:(g=a.expandAll)==null||g.call(a,!1);break;case E.CHECK_STRICTLY:t("strictly-change",!1);break;case E.CHECK_UN_STRICTLY:t("strictly-change",!0);break}}function s(l){t("search",l)}const u=rt(s,200);return F(()=>p.value,l=>{u(l)}),F(()=>a.searchText,l=>{l!==p.value&&(p.value=l)}),(l,o)=>(I(),P("div",{class:ke([r(L)(),"flex px-2 py-1.5 items-center"])},[r(S).headerTitle?We(l.$slots,"headerTitle",{key:0}):j("v-if",!0),!r(S).headerTitle&&l.title?(I(),ne(r(bt),{key:1,helpMessage:l.helpMessage},{default:U(()=>[ye(pe(l.title),1)]),_:1},8,["helpMessage"])):j("v-if",!0),l.search||l.toolbar?(I(),P("div",Mt,[l.search?(I(),P("div",{key:0,class:ke(r(i))},[v(r(Ze),{placeholder:r(n)("common.searchText"),size:"small",allowClear:"",value:p.value,"onUpdate:value":o[0]||(o[0]=d=>p.value=d)},null,8,["placeholder","value"])],2)):j("v-if",!0),l.toolbar?(I(),ne(r(st),{key:1,onClick:o[1]||(o[1]=ct(()=>{},["prevent"]))},{overlay:U(()=>[v(r(Q),{onClick:x},{default:U(()=>[(I(!0),P(z,null,et(r(k),d=>(I(),P(z,{key:d.value},[v(r(tt),nt(lt({key:d.value})),{default:U(()=>[ye(pe(d.label),1)]),_:2},1040),d.divider?(I(),ne(r(at),{key:0})):j("v-if",!0)],64))),128))]),_:1})]),default:U(()=>[v(r(G),{icon:"ion:ellipsis-vertical"})]),_:1})):j("v-if",!0)])):j("v-if",!0)],2))}});const jt=({icon:e})=>e?it(e)?ot(G,{icon:e,class:"mr-1"}):G:null;function Ot(e,t){function a(s){const u=[],l=s||r(e),{key:o,children:d}=r(t);if(!d||!o)return u;for(let f=0;f<l.length;f++){const h=l[f];u.push(h[o]);const g=h[d];g&&g.length&&u.push(...a(g))}return u}function p(s){const u=[],l=s||r(e),{key:o,children:d}=r(t);if(!d||!o)return u;for(let f=0;f<l.length;f++){const h=l[f];h.disabled!==!0&&h.selectable!==!1&&u.push(h[o]);const g=h[d];g&&g.length&&u.push(...p(g))}return u}function L(s,u){const l=[],o=u||r(e),{key:d,children:f}=r(t);if(!f||!d)return l;for(let h=0;h<o.length;h++){const g=o[h],_=g[f];s===g[d]?(l.push(g[d]),_&&_.length&&l.push(...a(_))):_&&_.length&&l.push(...L(s,_))}return l}function S(s,u,l){if(!s)return;const o=l||r(e),{key:d,children:f}=r(t);if(!(!f||!d))for(let h=0;h<o.length;h++){const g=o[h],_=g[f];if(g[d]===s){o[h]=$($({},o[h]),u);break}else _&&_.length&&S(s,u,g[f])}}function n(s=1,u,l=1){if(!s)return[];const o=[],d=u||r(e)||[];for(let f=0;f<d.length;f++){const h=d[f],{key:g,children:_}=r(t),J=g?h[g]:"",O=_?h[_]:[];o.push(J),O&&O.length&&l<s&&(l+=1,o.push(...n(s,O,l)))}return o}function i({parentKey:s=null,node:u,push:l="push"}){const o=le(r(e));if(!s){o[l](u),e.value=o;return}const{key:d,children:f}=r(t);!f||!d||(Le(o,h=>{if(h[d]===s)return h[f]=h[f]||[],h[f][l](u),!0}),e.value=o)}function k({parentKey:s=null,list:u,push:l="push"}){const o=le(r(e));if(!(!u||u.length<1))if(s){const{key:d,children:f}=r(t);if(!f||!d)return;Le(o,h=>{if(h[d]===s){h[f]=h[f]||[];for(let g=0;g<u.length;g++)h[f][l](u[g]);return e.value=o,!0}})}else for(let d=0;d<u.length;d++)o[l](u[d])}function x(s,u){if(!s)return;const l=u||r(e),{key:o,children:d}=r(t);if(!(!d||!o))for(let f=0;f<l.length;f++){const h=l[f],g=h[d];if(h[o]===s){l.splice(f,1);break}else g&&g.length&&x(s,h[d])}}return{deleteNodeByKey:x,insertNodeByKey:i,insertNodesByKey:k,filterByLevel:n,updateNodeByKey:S,getAllKeys:a,getChildrenKeys:L,getEnabledKeys:p}}function Pt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xe(e)}const se="context-menu",Ut={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},me=e=>{const{item:t}=e;return v("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&v(G,{class:"mr-2",icon:t.icon},null),v("span",null,[t.label])])};var Vt=te({name:"ContextMenu",props:Ut,setup(e){const t=Y(null),a=Y(!1),p=D(()=>{const{axis:n,items:i,styles:k,width:x}=e,{x:s,y:u}=n||{x:0,y:0},l=(i||[]).length*40,o=x,d=document.body,f=d.clientWidth<s+o?s-o:s,h=d.clientHeight<u+l?u-l:u;return ee($({},k),{position:"absolute",width:`${x}px`,left:`${f+1}px`,top:`${h+1}px`})});ge(()=>{dt(()=>a.value=!0)}),ve(()=>{const n=r(t);n&&document.body.removeChild(n)});function L(n,i){const{handler:k,disabled:x}=n;x||(a.value=!1,i==null||i.stopPropagation(),i==null||i.preventDefault(),k==null||k())}function S(n){return n.map(i=>{const{disabled:k,label:x,children:s,divider:u=!1}=i,l={item:i,handler:L,showIcon:e.showIcon};return!s||s.length===0?v(z,null,[v(Q.Item,{disabled:k,class:`${se}__item`,key:x},{default:()=>[v(me,l,null)]}),u?v(ut,{key:`d-${x}`},null):null]):r(a)?v(Q.SubMenu,{key:x,disabled:k,popupClassName:`${se}__popup`},{title:()=>v(me,l,null),default:()=>S(s)}):null})}return()=>{let n;if(!r(a))return null;const{items:i}=e;return v("div",{class:se},[v(Q,{inlineIndent:12,mode:"vertical",ref:t,style:r(p)},Pt(n=S(i))?n:{default:()=>[n]})])}}});const M={domList:[],resolve:()=>{}},Ht=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!Kt)return new Promise(a=>{const p=document.body,L=document.createElement("div"),S={};e.styles&&(S.styles=e.styles),e.items&&(S.items=e.items),e.event&&(S.customEvent=t,S.axis={x:t.clientX,y:t.clientY});const n=v(Vt,S);ht(n,L);const i=function(){M.resolve("")};M.domList.push(L);const k=function(){M.domList.forEach(x=>{try{x&&p.removeChild(x)}catch(s){}}),p.removeEventListener("click",i),p.removeEventListener("scroll",i)};M.resolve=function(x){k(),a(x)},k(),p.appendChild(L),p.addEventListener("click",i),p.addEventListener("scroll",i)})},we=function(){M&&(M.resolve(""),M.domList=[])};function Rt(e=!0){return ft()&&e&&ve(()=>{we()}),[Ht,we]}function Xt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xe(e)}var Gt=te({name:"BasicTree",inheritAttrs:!1,props:$t,emits:It,setup(e,{attrs:t,slots:a,emit:p,expose:L}){const[S]=_e("tree"),n=Se({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),i=Se({startSearch:!1,searchText:"",searchData:[]}),k=Y([]),[x]=Rt(),s=D(()=>{const{fieldNames:c}=e;return $({children:"children",title:"title",key:"key"},c)}),u=D(()=>{let c=ee($($({blockNode:!0},t),e),{expandedKeys:n.expandedKeys,selectedKeys:n.selectedKeys,checkedKeys:n.checkedKeys,checkStrictly:n.checkStrictly,filedNames:r(s),"onUpdate:expandedKeys":y=>{n.expandedKeys=y,p("update:expandedKeys",y)},"onUpdate:selectedKeys":y=>{n.selectedKeys=y,p("update:selectedKeys",y)},onCheck:(y,K)=>{let b=q(n.checkedKeys);if(Ct(b)&&i.startSearch){const{key:A}=r(s);b=yt(b,O(K.node.$attrs.node[A])),K.checked&&b.push(K.node.$attrs.node[A]),n.checkedKeys=b}else n.checkedKeys=y;const C=q(n.checkedKeys);p("update:value",C),p("check",C,K)},onRightClick:De});return pt(c,"treeData","class")}),l=D(()=>i.startSearch?i.searchData:r(k)),o=D(()=>!l.value||l.value.length===0),{deleteNodeByKey:d,insertNodeByKey:f,insertNodesByKey:h,filterByLevel:g,updateNodeByKey:_,getAllKeys:J,getChildrenKeys:O,getEnabledKeys:Ne}=Ot(k,s);function Be(c,y){return!y&&e.renderIcon&&ae(e.renderIcon)?e.renderIcon(c):y}function De(K){return fe(this,arguments,function*({event:c,node:y}){var w;const{rightMenuList:b=[],beforeRightClick:C}=e;let A={event:c,items:[]};if(C&&ae(C)){let m=yield C(y,c);Array.isArray(m)?A.items=m:Object.assign(A,m)}else A.items=b;!((w=A.items)==null?void 0:w.length)||x(A)})}function H(c){n.expandedKeys=c}function Ie(){return n.expandedKeys}function re(c){n.selectedKeys=c}function $e(){return n.selectedKeys}function ie(c){n.checkedKeys=c}function Me(){return n.checkedKeys}function oe(c){n.checkedKeys=c?Ne():[]}function W(c){n.expandedKeys=c?J():[]}function Fe(c){n.checkStrictly=c}F(()=>e.searchValue,c=>{c!==i.searchText&&(i.searchText=c)},{immediate:!0}),F(()=>e.treeData,c=>{c&&Z(i.searchText)});function Z(c){if(c!==i.searchText&&(i.searchText=c),p("update:searchValue",c),!c){i.startSearch=!1;return}const{filterFn:y,checkable:K,expandOnSearch:b,checkOnSearch:C,selectedOnSearch:A}=r(e);i.startSearch=!0;const{title:w,key:m}=r(s),N=[];if(i.searchData=Lt(r(k),T=>{var R,X;const B=y?y(c,T,r(s)):(X=(R=T[w])==null?void 0:R.includes(c))!=null?X:!1;return B&&N.push(T[m]),B},r(s)),b){const T=At(i.searchData).map(B=>B[m]);T&&T.length&&H(T)}C&&K&&N.length&&ie(N),A&&N.length&&re(N)}function je(c,y){if(!(!e.clickRowToExpand||!y||y.length===0))if(!n.expandedKeys.includes(c))H([...n.expandedKeys,c]);else{const K=[...n.expandedKeys],b=K.findIndex(C=>C===c);b!==-1&&K.splice(b,1),H(K)}}V(()=>{k.value=e.treeData}),ge(()=>{const c=parseInt(e.defaultExpandLevel);c>0?n.expandedKeys=g(c):e.defaultExpandAll&&W(!0)}),V(()=>{n.expandedKeys=e.expandedKeys}),V(()=>{n.selectedKeys=e.selectedKeys}),V(()=>{n.checkedKeys=e.checkedKeys}),F(()=>e.value,()=>{n.checkedKeys=q(e.value||[])}),F(()=>n.checkedKeys,()=>{const c=q(n.checkedKeys);p("update:value",c),p("change",c)}),V(()=>{n.checkStrictly=e.checkStrictly});const Oe={setExpandedKeys:H,getExpandedKeys:Ie,setSelectedKeys:re,getSelectedKeys:$e,setCheckedKeys:ie,getCheckedKeys:Me,insertNodeByKey:f,insertNodesByKey:h,deleteNodeByKey:d,updateNodeByKey:_,checkAll:oe,expandAll:W,filterByLevel:c=>{n.expandedKeys=g(c)},setSearchValue:c=>{Z(c)},getSearchValue:()=>i.searchText};function Pe(c){const{actionList:y}=e;if(!(!y||y.length===0))return y.map((K,b)=>{var A;let C=!0;return ae(K.show)?C=(A=K.show)==null?void 0:A.call(K,c):Ae(K.show)&&(C=K.show),C?v("span",{key:b,class:S("action")},[K.render(c)]):null})}const Ue=D(()=>{const c=le(l.value);return _t(c,(y,K)=>{var de;const b=i.searchText,{highlight:C}=r(e),{title:A,key:w,children:m}=r(s),N=Be(y,y.icon),T=vt(y,A),B=b?T.indexOf(b):-1,R=i.startSearch&&!mt(b)&&C&&B!==-1,X=`color: ${Ae(C)?"#f50":C}`,Ve=R?v("span",{class:((de=r(u))==null?void 0:de.blockNode)?`${S("content")}`:""},[v("span",null,[T.substr(0,B)]),v("span",{style:X},[b]),v("span",null,[T.substr(B+b.length)])]):T;return y.title=v("span",{class:`${S("title")} pl-2`,onClick:je.bind(null,y[w],y[m])},[(a==null?void 0:a.title)?wt(a,"title",y):v(z,null,[N&&v(jt,{icon:N},null),Ve,v("span",{class:S("actions")},[Pe(y)])])]),y}),c});return L(Oe),()=>{let c;const{title:y,helpMessage:K,toolbar:b,search:C,checkable:A}=e,w=y||b||C||a.headerTitle,m={height:"calc(100% - 38px)"};return v("div",{class:[S(),"h-full",t.class]},[w&&v(Ft,{checkable:A,checkAll:oe,expandAll:W,title:y,search:C,toolbar:b,helpMessage:K,onStrictlyChange:Fe,onSearch:Z,searchText:i.searchText},Xt(c=Et(a))?c:{default:()=>[c]}),be(v(Tt,{style:m},{default:()=>[v(kt,gt(r(u),{showIcon:!1,treeData:Ue.value}),null)]}),[[Ke,!r(o)]]),be(v(Ce,{image:Ce.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ke,r(o)]])])}}});export{Gt as _};
